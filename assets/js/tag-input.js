function inputTags(t) { let e = document.getElementById(t.id), n = document.getElementById("tags"); ({ init: function (t) { let a = this, i = document.createElement("input"); if (i.setAttribute("type", "hidden"), i.setAttribute("id", "tagInput"), i.setAttribute("name", "tagInput"), e.parentNode.insertBefore(i, e), n.addEventListener("click", function () { e.focus() }), t.tags) for (let e = 0; e < t.tags.length; e++)this.create(t.tags[e].replace(/[^a-z0-9\+\-\.\#]/gi, "").toUpperCase()); e.addEventListener("focusout", function () { let e = this.value.replace(/[^a-z0-9\+\-\.\#]/gi, ""); a.tags_array = [""], tag_exists = Boolean(a.tags_array.indexOf(e) + 1), e && tag_exists && !t.allowDuplicateTags ? a.showDuplicate(e) : e && tag_exists && t.allowDuplicateTags ? a.create(e) : e && !tag_exists && a.create(e), this.value = "" }), e.addEventListener("keyup", function (t) { if (/(188|13)/.test(t.which)) { let t = new Event("focusout"); e.dispatchEvent(t) } if (8 === event.which && "" === e.value) { let t = document.querySelectorAll(".tag"); t.length > 0 && e.addEventListener("keyup", function (e) { if (8 === e.which) { t[t.length - 1].remove(), a.update() } }) } }) }, create: function (e) { if (document.querySelectorAll(".tag").length < t.maxTags) { let t = this, a = document.createElement("span"), i = document.getElementById("tagInput"); a.setAttribute("class", "tag"), a.innerText = e.toUpperCase(); let s = document.createElement("span"); s.setAttribute("class", "close"), a.appendChild(s), n.insertBefore(a, i), a.childNodes[1].addEventListener("click", function () { t.remove(this) }), this.update() } }, update: function () { let t = document.getElementsByClassName("tag"), e = []; for (let n = 0; n < t.length; n++)e.push(t[n].textContent.toLowerCase()); this.tags_array = e, document.getElementById("tagInput").setAttribute("value", e.join()) }, remove: function (e) { t.onTagRemove(e.parentNode.textContent), e.parentNode.remove(), this.update() }, showDuplicate: function (t) { let e = document.getElementsByClassName("tag"); for (let n = 0; n < e.length; n++)e[n].textContent === t.toUpperCase() && (e[n].style.background = "#636363d9", window.setTimeout(function () { e[n].removeAttribute("style") }, 1100)) } }).init(t) }